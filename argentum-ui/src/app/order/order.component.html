<div class="container-fluid row col-lg d-lg-flex mx-0 px-1">
  <div class="container-grid-lg-8">

    <div class="row mx-0">
      <div class="col">
        <h4 class="text-center">{{selectedRange ? selectedRange.name: "Product range"}}</h4>
      </div>
    </div>

    <div class="col-lg row p-0 m-0">
      <div *ngFor="let product of getPaginated(products, rangeProductsPerPage, rangePage)"
           class="col-product-range">
        <button (click)="rangeProductClicked(product)" type="button" class="btn-product"
                [style.background-color]="product.category ? product.category.color : '#ffffff'"
                [class.dark-bg]="product.category && isDarkBackground(product.category.color)">
          <div>{{product.name}}</div>
          <div>€ {{product.price | number: '1.2-2'}}</div>
        </button>
      </div>
      <div
        *ngFor="let i of 1 | range : getNumPadItems(products.length, rangeProductsPerPage, rangePage)"
        class="col-product-range">
        <button type="button" class="btn-product btn-dummy disabled" disabled></button>
      </div>
      <div class="col-product-range">
        <button (click)="addCustomProduct()" type="button"
                class="btn-product btn-outline-primary btn-product-custom">Custom
        </button>
      </div>
    </div>

    <div class="row justify-content-center mx-0 my-1">
      <ngb-pagination [collectionSize]="products.length" [(page)]="rangePage" [pageSize]="rangeProductsPerPage"
                      size="lg"></ngb-pagination>
    </div>

    <div class="row my-1 mx-0">
      <div class="col-6">
        <div ngbDropdown [up]="true">
          <button class="btn btn-primary btn-block btn-lg" ngbDropdownToggle>
            {{selectedRange ? selectedRange.name : 'Select product range'}}
          </button>
          <div class="dropdown-menu">
            <button *ngFor="let range of productRanges" (click)="setProductRange(range)" class="dropdown-item btn-lg">
              {{range.name}}
            </button>
          </div>
        </div>
      </div>
      <div class="col-6">
        <button type="button" class="btn btn-primary btn-block btn-lg"><i class="fa fa-refresh fa-lg"></i></button>
      </div>
    </div>

  </div>


  <div class="container-grid-lg-4">

    <div class="row mx-0">
      <div class="col">
        <h4 class="text-center">Current order: € {{total | number: '1.2-2'}}</h4>
      </div>
    </div>

    <div class="row col-lg p-0 m-0">
      <div
        *ngFor="let productEntry of orderedProducts | iterable | slice:(orderProductsPerPage * (orderPage - 1)):(orderProductsPerPage * orderPage)"
        class="col-product-order">
        <button *ngIf="productEntry.key.id > -1" (click)="orderedProductClicked(productEntry.key)" type="button"
                class="btn btn-block btn-product"
                [style.background-color]="productEntry.key.category ? productEntry.key.category.color : '#ffffff'"
                [class.dark-bg]="productEntry.key.category && isDarkBackground(productEntry.key.category.color)">
          <div>{{productEntry.key.name}}</div>
          <div>€ {{productEntry.key.price | number: '1.2-2'}}</div>
          <div>x{{productEntry.value}}</div>
        </button>
        <button *ngIf="productEntry.key.id == -1" (click)="orderedProductClicked(productEntry.key)" type="button"
                class="btn-product btn-outline-primary btn-product-custom">
          <div>Custom</div>
          <div>€ {{productEntry.key.price | number: '1.2-2'}}</div>
        </button>
      </div>
      <div
        *ngFor="let i of 1 | range : getNumPadItems(orderedProducts.size, orderProductsPerPage, orderPage)"
        class="col-product-order">
        <button type="button" class="btn-product btn-dummy disabled" disabled></button>
      </div>
    </div>

    <div class="row justify-content-center mx-0 my-1">
      <ngb-pagination [collectionSize]="orderedProducts.size" [(page)]="orderPage"
                      [pageSize]="orderProductsPerPage" size="lg"></ngb-pagination>
    </div>

    <div class="row my-1 mx-0">
      <button type="button" class="btn-grid-bar">
        <i class="fa fa-shopping-cart fa-lg"></i>
        <i class="fa fa-long-arrow-right fa-lg"></i>
      </button>
    </div>

  </div>
</div>
