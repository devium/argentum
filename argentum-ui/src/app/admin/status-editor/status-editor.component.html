<app-admin-nav></app-admin-nav>

<div class="container mt-3">

  <table *ngIf="statuses.length > 0" class="table table-sm table-responsive table-striped">
    <thead>
    <tr>
      <th>Internal name</th>
      <th>Displayed name</th>
      <th>Color</th>
    </tr>
    </thead>

    <tbody>
    <tr *ngFor="let status of statuses" [class.changed]="status.changed" [class.removed]="!status.edited">
      <td>
        <input
          [(ngModel)]="status.displayed.internalName"
          (input)="status.updateChanged()"
          (focus)="$event.target.select()"
          class="form-control p-1"
          [class.disabled]="!status.edited"
          [disabled]="!status.edited"
        >
      </td>
      <td>
        <input
          [(ngModel)]="status.displayed.displayName"
          (input)="status.updateChanged()"
          (focus)="$event.target.select()"
          class="form-control p-1"
          [class.disabled]="!status.edited"
          [disabled]="!status.edited"
        >
      </td>
      <td>
        <input
          [(ngModel)]="status.displayed.color"
          (input)="status.updateChanged()"
          class="form-control h-100 color-picker"
          type="color"
          [style.background-color]="status.displayed.color"
          [class.disabled]="!status.edited"
          [disabled]="!status.edited"
        >
      </td>
      <td class="text-center">
        <button
          (click)="status.reset()"
          class="btn btn-primary btn-sm"
          [class.disabled]="(!status.changed && status.edited) || !status.original"
          [disabled]="!status.changed && status.edited || !status.original"
        >
          <i class="fa fa-undo"></i>
        </button>
      </td>
      <td class="text-center">
        <button
          (click)="remove(status)"
          class="btn btn-danger btn-sm"
          [class.disabled]="!status.edited"
          [disabled]="!status.edited"
        >
          <i class="fa fa-trash"></i>
        </button>
      </td>
    </tr>

    </tbody>
  </table>

  <div class="mt-3 container-buttons">
    <button (click)="newStatus()" class="btn btn-primary btn-sm">
      <i class="fa fa-plus pr-1"></i><span>New status</span>
    </button>
    <button (click)="resetAll()" class="btn btn-primary btn-sm">
      <i class="fa fa-undo pr-1"></i><span>Reset all</span>
    </button>
    <button (click)="save()" class="btn btn-primary btn-sm">
      <i class="fa fa-save pr-1"></i><span>Save changes</span>
    </button>
  </div>

  <div class="mt-3">
    <app-message></app-message>
  </div>

</div>

<app-navbar></app-navbar>
